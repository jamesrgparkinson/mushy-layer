<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Mushy Layer: Melt pond simulations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Mushy Layer
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Melt pond simulations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The inputs files in this directory are designed to</p>
<ol type="1">
<li>simulate sea ice growth</li>
<li>add a melt pond to some sea ice</li>
<li>simulate the melt pond evolution</li>
</ol>
<h1>Prerequisites</h1>
<p>To run the code you'll need to have compiled the code <code>/mushy-layer/execSubcycle/</code>, and also the code in <code>/mushy-layer/setupNewRun/</code></p>
<p>```console $ cd ../../execSubcycle/; make all $ cd ../../setupNewRun/; make all ```</p>
<h1>Simulate sea ice growth</h1>
<p>Assuming your compiled mushy layer executable is called <code>mushyLayer2d.Linux.64.mpiCC.gfortran.OPT.MPI.ex</code> (it may not be), you can start growing sea ice via</p>
<p>```console $ cd ~/mushy-layer/examples/meltponds/ $ ../../execSubcycle/mushyLayer2d.Linux.64.mpiCC.gfortran.OPT.MPI.ex inputsGrowSeaIce ```</p>
<p>This is a very coarse simulation, which should grow a sensible ammount of ice in a few minutes. Once you're happy that you have enough ice, cancel the execution and move on to the next step.</p>
<h1>Adding a melt pond</h1>
<p>Adding a melt pond is done via a seperate program. You'll need to edit the <code>setupNewRunAddPond</code> file to ensure that the <code>inFile</code>, <code>run_inputs</code>, and <code>outfile</code> paths are correct. Then run the program via</p>
<p>```console ../../setupNewRun/setupnewrun2d.Linux.64.mpiCC.gfortran.OPT.MPI.ex setupNewRunAddPond ```</p>
<p>This should create a <code>restart.2d.hdf5</code> file at the location specified in the <code>setupNewRunAddPond</code> inputs file.</p>
<h1>Simulating melt pond evolution</h1>
<p>Make sure the parameter <code>main.restart_file</code> in <code>inputsEvolveMeltPond</code> points to the newly created file, then start simulations like before but with the new inputs file ```console ../../execSubcycle/mushyLayer2d.Linux.64.mpiCC.gfortran.OPT.MPI.ex inputsEvolveMeltPond ```</p>
<p>The key difference between growing ice and evolving the melt pond simulations are: ``` bc.enthalpyHiVal=0 6.02 parameters.pressureHead=5 bc.velHi=6 9 0 # pressure head top bc main.plot_period=0.00002 ``` We increase the enthalpy boundary at the top of the domain in the vertical direction, specify the pressure head, change velocity boundary condition at the top of the domain to use this pressure head, and make the plotting period more frequent (as we now have much stronger flow, so smaller timesteps). </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 7 2019 16:38:10 for Mushy Layer by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
